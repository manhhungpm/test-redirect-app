<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>App Redirection</title>

  <script>
    function getParameterByName(name, url) {
      if (!url) url = window.location.href;
      name = name.replace(/[\[\]]/g, "\\$&");
      var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
          results = regex.exec(url);
      if (!results) return null;
      if (!results[2]) return '';
      return decodeURIComponent(results[2].replace(/\+/g, " "));
    }


    //Get param from long link
    var fallbackLink = getParameterByName('redirect_url') ? getParameterByName('redirect_url') : 'http://example.com/my-web-app/';
    var customProtocol = getParameterByName('custom_protocol');
    var androidStore = getParameterByName('android_store');
    var iosStore = getParameterByName('ios_store');


    function isApple() {
      // var isiOS = navigator.userAgent.match('iPad') || navigator.userAgent.match('iPhone') || navigator.userAgent.match('iPod');
	    return navigator.userAgent.indexOf('iPhone') > 0 || navigator.userAgent.indexOf('iPad') > 0;
    }

    function isAndroid() {
      //return navigator.userAgent.match('Android');
	    return navigator.userAgent.indexOf('Android') > 0;
    }


    function redirectToApp() {
      var appUrl = "myvpbank://myvpbank";
      var fallbackUrl = "";
      var userAgent = navigator.userAgent || navigator.vendor || window.opera;

      // Check if user is using an iOS device
      if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
        fallbackUrl = "https://apps.apple.com/us/app/myapp/1661762590";
      }
      // Check if user is using an Android device
      else if (/android/i.test(userAgent)) {
        fallbackUrl = "https://play.google.com/store/apps/details?id=com.vpbank.myvpbank";
      }

      setTimeout(function() {
        if (document.webkitHidden || document.hidden) {
          // User switched to a different app or home screen
          return;
        }
        window.location = fallbackUrl;
      }, 2000); // Wait for 2 seconds before redirecting to fallback URL

      window.location = appUrl;
    }

    
  </script>
</head>
<body>

  <iframe style="display:none" height="0" width="0" id="loader"></iframe>
  <script>

    redirectToApp()

  </script>
</body>
</html>
